<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pen Clicker</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: url('background.jpg') no-repeat center center fixed;
      background-size: cover;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
      height: 100vh;
      gap: 2rem;
    }
    .pen {
      cursor: pointer;
      width: 60px;
      transition: transform 0.1s ease;
    }
    .pen:active {
      transform: translateY(2px);
    }
  </style>
  <script src="https://unpkg.com/tone/build/Tone.js"></script>
</head>
<body>

  <!-- 7 pens -->
  <img src="pen-static-1.png" class="pen" data-id="1" />
  <img src="pen-static-2.png" class="pen" data-id="2" />
  <img src="pen-static-3.png" class="pen" data-id="3" />
  <img src="pen-static-4.png" class="pen" data-id="4" />
  <img src="pen-static-5.png" class="pen" data-id="5" />
  <img src="pen-static-6.png" class="pen" data-id="6" />
  <img src="pen-static-7.png" class="pen" data-id="7" />

  <script>
    const pens = document.querySelectorAll('.pen');
    const pitches = [1.0, 1.15, 1.3, 1.45, 0.85, 0.7, 0.95];
    const inSoundUrl = 'click-in.mp3';   // rename your 'click in' audio
    const outSoundUrl = 'click-out.mp3'; // rename your 'click out' audio

    let inBuffer, outBuffer;

    // Load audio buffers
    Promise.all([
      fetch(inSoundUrl).then(r => r.arrayBuffer()).then(Tone.context.decodeAudioData),
      fetch(outSoundUrl).then(r => r.arrayBuffer()).then(Tone.context.decodeAudioData)
    ]).then(([inB, outB]) => {
      inBuffer = inB;
      outBuffer = outB;
    });

    pens.forEach((pen, i) => {
      let clicked = false;
      const id = pen.dataset.id;

      pen.addEventListener('click', async () => {
        await Tone.start();
        clicked = !clicked;
        pen.src = clicked ? `pen-click-${id}.png` : `pen-static-${id}.png`;

        // Use appropriate buffer
        const buffer = clicked ? inBuffer : outBuffer;
        const player = new Tone.Player({
          url: buffer,
          playbackRate: pitches[i],
          autostart: true
        }).toDestination();
      });
    });
  </script>
</body>
</html>
